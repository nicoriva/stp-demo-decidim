{"ast":null,"code":"/* eslint-disable require-jsdoc */\n\nimport createOptionAttachedInputs from \"src/decidim/forms/option_attached_inputs.component\";\nimport createAutosortableCheckboxes from \"src/decidim/forms/autosortable_checkboxes.component\";\nimport createDisplayConditions from \"src/decidim/forms/display_conditions.component\";\nimport createMaxChoicesAlertComponent from \"src/decidim/forms/max_choices_alert.component\";\n$(function () {\n  $(\".radio-button-collection, .check-box-collection\").each(function (idx, el) {\n    createOptionAttachedInputs({\n      wrapperField: $(el),\n      controllerFieldSelector: \"input[type=radio], input[type=checkbox]\",\n      dependentInputSelector: \"input[type=text], input[type=hidden]\"\n    });\n  });\n  $.unique($(\".check-box-collection\").parents(\".answer\")).each(function (idx, el) {\n    var maxChoices = $(el).data(\"max-choices\");\n    if (maxChoices) {\n      createMaxChoicesAlertComponent({\n        wrapperField: $(el),\n        controllerFieldSelector: \"input[type=checkbox]\",\n        controllerCollectionSelector: \".check-box-collection\",\n        alertElement: $(el).find(\".max-choices-alert\"),\n        maxChoices: maxChoices\n      });\n    }\n  });\n  $(\".sortable-check-box-collection\").each(function (idx, el) {\n    createAutosortableCheckboxes({\n      wrapperField: $(el)\n    });\n  });\n  $(\".answer-questionnaire .question[data-conditioned='true']\").each(function (idx, el) {\n    createDisplayConditions({\n      wrapperField: $(el)\n    });\n  });\n  var $form = $(\"form.answer-questionnaire\");\n  if ($form.length > 0) {\n    $form.find(\"input, textarea, select\").on(\"change\", function () {\n      $form.data(\"changed\", true);\n    });\n    var safePath = $form.data(\"safe-path\").split(\"?\")[0];\n    $(document).on(\"click\", \"a\", function (event) {\n      window.exitUrl = event.currentTarget.href;\n    });\n    $(document).on(\"submit\", \"form\", function (event) {\n      window.exitUrl = event.currentTarget.action;\n    });\n    window.addEventListener(\"beforeunload\", function (event) {\n      var exitUrl = window.exitUrl;\n      var hasChanged = $form.data(\"changed\");\n      window.exitUrl = null;\n      if (!hasChanged || exitUrl && exitUrl.includes(safePath)) {\n        return;\n      }\n      event.returnValue = true;\n    });\n  }\n});","map":{"version":3,"names":["createOptionAttachedInputs","createAutosortableCheckboxes","createDisplayConditions","createMaxChoicesAlertComponent","$","each","idx","el","wrapperField","controllerFieldSelector","dependentInputSelector","unique","parents","maxChoices","data","controllerCollectionSelector","alertElement","find","$form","length","on","safePath","split","document","event","window","exitUrl","currentTarget","href","action","addEventListener","hasChanged","includes","returnValue"],"sources":["/home/nico/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-forms-0.27.3/app/packs/src/decidim/forms/forms.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n\nimport createOptionAttachedInputs from \"src/decidim/forms/option_attached_inputs.component\"\nimport createAutosortableCheckboxes from \"src/decidim/forms/autosortable_checkboxes.component\"\nimport createDisplayConditions from \"src/decidim/forms/display_conditions.component\"\nimport createMaxChoicesAlertComponent from \"src/decidim/forms/max_choices_alert.component\"\n\n$(() => {\n  $(\".radio-button-collection, .check-box-collection\").each((idx, el) => {\n    createOptionAttachedInputs({\n      wrapperField: $(el),\n      controllerFieldSelector: \"input[type=radio], input[type=checkbox]\",\n      dependentInputSelector: \"input[type=text], input[type=hidden]\"\n    });\n  });\n\n  $.unique($(\".check-box-collection\").parents(\".answer\")).each((idx, el) => {\n    const maxChoices = $(el).data(\"max-choices\");\n    if (maxChoices) {\n      createMaxChoicesAlertComponent({\n        wrapperField: $(el),\n        controllerFieldSelector: \"input[type=checkbox]\",\n        controllerCollectionSelector: \".check-box-collection\",\n        alertElement: $(el).find(\".max-choices-alert\"),\n        maxChoices: maxChoices\n      });\n    }\n  });\n\n  $(\".sortable-check-box-collection\").each((idx, el) => {\n    createAutosortableCheckboxes({\n      wrapperField: $(el)\n    })\n  });\n\n  $(\".answer-questionnaire .question[data-conditioned='true']\").each((idx, el) => {\n    createDisplayConditions({\n      wrapperField: $(el)\n    });\n  });\n\n  const $form = $(\"form.answer-questionnaire\");\n  if ($form.length > 0) {\n    $form.find(\"input, textarea, select\").on(\"change\", () => {\n      $form.data(\"changed\", true);\n    });\n\n    const safePath = $form.data(\"safe-path\").split(\"?\")[0];\n    $(document).on(\"click\", \"a\", (event) => {\n      window.exitUrl = event.currentTarget.href;\n    });\n    $(document).on(\"submit\", \"form\", (event) => {\n      window.exitUrl = event.currentTarget.action;\n    });\n\n    window.addEventListener(\"beforeunload\", (event) => {\n      const exitUrl = window.exitUrl;\n      const hasChanged = $form.data(\"changed\");\n      window.exitUrl = null;\n\n      if (!hasChanged || (exitUrl && exitUrl.includes(safePath))) {\n        return;\n      }\n\n      event.returnValue = true;\n    });\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}