{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n/* eslint-disable no-div-regex, no-useless-escape, no-param-reassign, id-length */\n/* eslint max-lines: [\"error\", {\"max\": 350, \"skipBlankLines\": true}] */\n\n/**\n * A plain Javascript component that handles the form filter.\n * @class\n * @augments Component\n */\n\nimport delayed from \"src/decidim/delayed\";\nimport CheckBoxesTree from \"src/decidim/check_boxes_tree\";\nimport { registerCallback, unregisterCallback, pushState, replaceState, state } from \"src/decidim/history\";\nimport DataPicker from \"src/decidim/data_picker\";\nvar FormFilterComponent = /*#__PURE__*/function () {\n  function FormFilterComponent($form) {\n    _classCallCheck(this, FormFilterComponent);\n    this.$form = $form;\n    this.id = this.$form.attr(\"id\") || this._getUID();\n    this.mounted = false;\n    this.changeEvents = true;\n    this.theCheckBoxesTree = new CheckBoxesTree();\n    this.theDataPicker = window.theDataPicker || new DataPicker($(\".data-picker\"));\n    this._updateInitialState();\n    this._onFormChange = delayed(this, this._onFormChange.bind(this));\n    this._onFormSubmit = delayed(this, this._onFormSubmit.bind(this));\n    this._onPopState = this._onPopState.bind(this);\n    if (window.Decidim.PopStateHandler) {\n      this.popStateSubmiter = false;\n    } else {\n      this.popStateSubmiter = true;\n      window.Decidim.PopStateHandler = this.id;\n    }\n  }\n\n  /**\n   * Handles the logic for unmounting the component\n   * @public\n   * @returns {Void} - Returns nothing\n   */\n  _createClass(FormFilterComponent, [{\n    key: \"unmountComponent\",\n    value: function unmountComponent() {\n      if (this.mounted) {\n        this.mounted = false;\n        this.$form.off(\"change\", \"input, select\", this._onFormChange);\n        this.$form.off(\"submit\", this._onFormSubmit);\n        unregisterCallback(\"filters-\".concat(this.id));\n      }\n    }\n\n    /**\n     * Handles the logic for mounting the component\n     * @public\n     * @returns {Void} - Returns nothing\n     */\n  }, {\n    key: \"mountComponent\",\n    value: function mountComponent() {\n      var _this = this;\n      if (this.$form.length > 0 && !this.mounted) {\n        this.mounted = true;\n        var queue = 0;\n        var contentContainer = $(this.$form.closest(\".filters\").parent().find(\".skip\").attr(\"href\"));\n        if (contentContainer.length === 0 && this.$form.data(\"remoteFill\")) {\n          contentContainer = this.$form.data(\"remoteFill\");\n        }\n        this.$form.on(\"change\", \"input:not([data-disable-dynamic-change]), select:not([data-disable-dynamic-change])\", this._onFormChange);\n        this.$form.on(\"submit\", this._onFormSubmit);\n        this.currentFormRequest = null;\n        this.$form.on(\"ajax:beforeSend\", function (e) {\n          if (_this.currentFormRequest) {\n            _this.currentFormRequest.abort();\n          }\n          _this.currentFormRequest = e.originalEvent.detail[0];\n          queue += 1;\n          if (queue > 0 && contentContainer.length > 0 && !contentContainer.hasClass(\"spinner-container\")) {\n            contentContainer.addClass(\"spinner-container\");\n          }\n        });\n        this.$form.on(\"ajax:success\", function () {\n          queue -= 1;\n          if (queue <= 0 && contentContainer.length > 0) {\n            contentContainer.removeClass(\"spinner-container\");\n          }\n        });\n        this.$form.on(\"ajax:error\", function () {\n          queue -= 1;\n          if (queue <= 0 && contentContainer.length > 0) {\n            contentContainer.removeClass(\"spinner-container\");\n          }\n          _this.$form.find(\".spinner-container\").addClass(\"hide\");\n        });\n        this.theCheckBoxesTree.setContainerForm(this.$form);\n        registerCallback(\"filters-\".concat(this.id), function (currentState) {\n          _this._onPopState(currentState);\n        });\n      }\n    }\n\n    /**\n     * Sets path in the browser history with the initial filters state, to allow to restoring it when using browser history.\n     * @private\n     * @returns {Void} - Returns nothing.\n     */\n  }, {\n    key: \"_updateInitialState\",\n    value: function _updateInitialState() {\n      var _this$_currentStateAn = this._currentStateAndPath(),\n        _this$_currentStateAn2 = _slicedToArray(_this$_currentStateAn, 2),\n        initialPath = _this$_currentStateAn2[0],\n        initialState = _this$_currentStateAn2[1];\n      initialState._path = initialPath;\n      replaceState(null, initialState);\n    }\n\n    /**\n     * Finds the current location.\n     * @param {boolean} withHost - include the host part in the returned location\n     * @private\n     * @returns {String} - Returns the current location.\n     */\n  }, {\n    key: \"_getLocation\",\n    value: function _getLocation() {\n      var withHost = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var currentState = state();\n      var path = \"\";\n      if (currentState && currentState._path) {\n        path = currentState._path;\n      } else {\n        path = window.location.pathname + window.location.search + window.location.hash;\n      }\n      if (withHost) {\n        return window.location.origin + path;\n      }\n      return path;\n    }\n\n    /**\n     * Parse current location and get filter values.\n     * @private\n     * @returns {Object} - An object where a key correspond to a filter field\n     *                     and the value is the current value for the filter.\n     */\n  }, {\n    key: \"_parseLocationFilterValues\",\n    value: function _parseLocationFilterValues() {\n      // Every location param is constructed like this: filter[key]=value\n      var regexpResult = decodeURIComponent(this._getLocation()).match(/filter\\[([^\\]]*)\\](?:\\[\\])?=([^&]*)/g);\n\n      // The RegExp g flag returns null or an array of coincidences. It doesn't return the match groups\n      if (regexpResult) {\n        var filterParams = regexpResult.reduce(function (acc, result) {\n          var _result$match = result.match(/filter\\[([^\\]]*)\\](\\[\\])?=([^&]*)/),\n            _result$match2 = _slicedToArray(_result$match, 4),\n            key = _result$match2[1],\n            array = _result$match2[2],\n            value = _result$match2[3];\n          if (array) {\n            if (!acc[key]) {\n              acc[key] = [];\n            }\n            acc[key].push(value);\n          } else {\n            acc[key] = value;\n          }\n          return acc;\n        }, {});\n        return filterParams;\n      }\n      return null;\n    }\n\n    /**\n     * Parse current location and get the current order.\n     * @private\n     * @returns {string} - The current order\n     */\n  }, {\n    key: \"_parseLocationOrderValue\",\n    value: function _parseLocationOrderValue() {\n      var url = this._getLocation();\n      var match = url.match(/order=([^&]*)/);\n      var $orderMenu = this.$form.find(\".order-by .menu\");\n      var order = $orderMenu.find(\".menu a:first\").data(\"order\");\n      if (match) {\n        order = match[1];\n      }\n      return order;\n    }\n\n    /**\n     * Clears the form to start with a clean state.\n     * @private\n     * @returns {Void} - Returns nothing.\n     */\n  }, {\n    key: \"_clearForm\",\n    value: function _clearForm() {\n      var _this2 = this;\n      this.$form.find(\"input[type=checkbox]\").each(function (index, element) {\n        element.checked = element.indeterminate = false;\n      });\n      this.$form.find(\"input[type=radio]\").attr(\"checked\", false);\n      this.$form.find(\".data-picker\").each(function (_index, picker) {\n        _this2.theDataPicker.clear(picker);\n      });\n\n      // This ensure the form is reset in a valid state where a fieldset of\n      // radio buttons has the first selected.\n      this.$form.find(\"fieldset input[type=radio]:first\").each(function () {\n        // I need the this to iterate a jQuery collection\n        $(this)[0].checked = true; // eslint-disable-line no-invalid-this\n      });\n    }\n\n    /**\n     * Handles the logic when going back to a previous state in the filter form.\n     * @private\n     * @param {Object} currentState - state stored along with location URL\n     * @returns {Void} - Returns nothing.\n     */\n  }, {\n    key: \"_onPopState\",\n    value: function _onPopState(currentState) {\n      var _this3 = this;\n      this.changeEvents = false;\n      this._clearForm();\n      var filterParams = this._parseLocationFilterValues();\n      var currentOrder = this._parseLocationOrderValue();\n      this.$form.find(\"input.order_filter\").val(currentOrder);\n      if (filterParams) {\n        var fieldIds = Object.keys(filterParams);\n\n        // Iterate the filter params and set the correct form values\n        fieldIds.forEach(function (fieldName) {\n          var value = filterParams[fieldName];\n          if (Array.isArray(value)) {\n            var checkboxes = _this3.$form.find(\"input[type=checkbox][name=\\\"filter[\".concat(fieldName, \"][]\\\"]\"));\n            _this3.theCheckBoxesTree.updateChecked(checkboxes, value);\n          } else {\n            _this3.$form.find(\"*[name=\\\"filter[\".concat(fieldName, \"]\\\"]\")).each(function (index, element) {\n              switch (element.type) {\n                case \"hidden\":\n                  break;\n                case \"radio\":\n                case \"checkbox\":\n                  element.checked = value === element.value;\n                  break;\n                default:\n                  element.value = value;\n              }\n            });\n          }\n        });\n      }\n\n      // Retrieves picker information for selected values (value, text and link) from the state object\n      $(\".data-picker\", this.$form).each(function (_index, picker) {\n        var pickerState = currentState[picker.id];\n        if (pickerState) {\n          _this3.theDataPicker.load(picker, pickerState);\n        }\n      });\n\n      // Only one instance should submit the form on browser history navigation\n      if (this.popStateSubmiter) {\n        Rails.fire(this.$form[0], \"submit\", {\n          from: \"pop\"\n        });\n      }\n      this.changeEvents = true;\n    }\n\n    /**\n     * Handles the logic to decide whether the form should be submitted or not\n     * after a form change event. The form is only submitted when changes have\n     * occurred.\n     * @private\n     * @returns {Void} - Returns nothing.\n     */\n  }, {\n    key: \"_onFormChange\",\n    value: function _onFormChange() {\n      if (!this.changeEvents) {\n        return;\n      }\n      var _this$_currentStateAn3 = this._currentStateAndPath(),\n        _this$_currentStateAn4 = _slicedToArray(_this$_currentStateAn3, 1),\n        newPath = _this$_currentStateAn4[0];\n      var path = this._getLocation(false);\n      if (newPath === path) {\n        return;\n      }\n      Rails.fire(this.$form[0], \"submit\");\n    }\n\n    /**\n     * Saves the current state of the search on form submit to update the search\n     * parameters to the URL and store the picker states.\n     * @private\n     * @param {jQuery.Event} ev The event that caused the form to submit.\n     * @returns {Void} - Returns nothing.\n     */\n  }, {\n    key: \"_onFormSubmit\",\n    value: function _onFormSubmit(ev) {\n      var eventDetail = ev.originalEvent.detail;\n      if (eventDetail && eventDetail.from === \"pop\") {\n        return;\n      }\n      var _this$_currentStateAn5 = this._currentStateAndPath(),\n        _this$_currentStateAn6 = _slicedToArray(_this$_currentStateAn5, 2),\n        newPath = _this$_currentStateAn6[0],\n        newState = _this$_currentStateAn6[1];\n      pushState(newPath, newState);\n      this._saveFilters(newPath);\n    }\n\n    /**\n     * Calculates the path and the state associated to the filters inputs.\n     * @private\n     * @returns {Array} - Returns an array with the path and the state for the current filters state.\n     */\n  }, {\n    key: \"_currentStateAndPath\",\n    value: function _currentStateAndPath() {\n      var _this4 = this;\n      var formAction = this.$form.attr(\"action\");\n      var params = this.$form.find(\":not(.ignore-filters)\").find(\"select:not(.ignore-filter), input:not(.ignore-filter)\").serialize();\n      var path = \"\";\n      var currentState = {};\n      if (formAction.indexOf(\"?\") < 0) {\n        path = \"\".concat(formAction, \"?\").concat(params);\n      } else {\n        path = \"\".concat(formAction, \"&\").concat(params);\n      }\n\n      // Stores picker information for selected values (value, text and link) in the currentState object\n      $(\".data-picker\", this.$form).each(function (_index, picker) {\n        currentState[picker.id] = _this4.theDataPicker.save(picker);\n      });\n      return [path, currentState];\n    }\n\n    /**\n     * Generates a unique identifier for the form.\n     * @private\n     * @returns {String} - Returns a unique identifier\n     */\n  }, {\n    key: \"_getUID\",\n    value: function _getUID() {\n      return \"filter-form-\".concat(new Date().getUTCMilliseconds(), \"-\").concat(Math.floor(Math.random() * 10000000));\n    }\n\n    /**\n     * Saves the changed filters on sessionStorage API.\n     * @private\n     * @param {string} pathWithQueryStrings - path with all the query strings for filter. To be used with backToListLink().\n     * @returns {Void} - Returns nothing.\n     */\n  }, {\n    key: \"_saveFilters\",\n    value: function _saveFilters(pathWithQueryStrings) {\n      if (!window.sessionStorage) {\n        return;\n      }\n      var pathName = this.$form.attr(\"action\");\n      sessionStorage.setItem(\"filteredParams\", JSON.stringify(_defineProperty({}, pathName, pathWithQueryStrings)));\n    }\n  }]);\n  return FormFilterComponent;\n}();\nexport { FormFilterComponent as default };","map":{"version":3,"names":["delayed","CheckBoxesTree","registerCallback","unregisterCallback","pushState","replaceState","state","DataPicker","FormFilterComponent","$form","_classCallCheck","id","attr","_getUID","mounted","changeEvents","theCheckBoxesTree","theDataPicker","window","$","_updateInitialState","_onFormChange","bind","_onFormSubmit","_onPopState","Decidim","PopStateHandler","popStateSubmiter","_createClass","key","value","unmountComponent","off","concat","mountComponent","_this","length","queue","contentContainer","closest","parent","find","data","on","currentFormRequest","e","abort","originalEvent","detail","hasClass","addClass","removeClass","setContainerForm","currentState","_this$_currentStateAn","_currentStateAndPath","_this$_currentStateAn2","_slicedToArray","initialPath","initialState","_path","_getLocation","withHost","arguments","undefined","path","location","pathname","search","hash","origin","_parseLocationFilterValues","regexpResult","decodeURIComponent","match","filterParams","reduce","acc","result","_result$match","_result$match2","array","push","_parseLocationOrderValue","url","$orderMenu","order","_clearForm","_this2","each","index","element","checked","indeterminate","_index","picker","clear","_this3","currentOrder","val","fieldIds","Object","keys","forEach","fieldName","Array","isArray","checkboxes","updateChecked","type","pickerState","load","Rails","fire","from","_this$_currentStateAn3","_this$_currentStateAn4","newPath","ev","eventDetail","_this$_currentStateAn5","_this$_currentStateAn6","newState","_saveFilters","_this4","formAction","params","serialize","indexOf","save","Date","getUTCMilliseconds","Math","floor","random","pathWithQueryStrings","sessionStorage","pathName","setItem","JSON","stringify","_defineProperty","default"],"sources":["/home/nico/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.3/app/packs/src/decidim/form_filter.js"],"sourcesContent":["/* eslint-disable no-div-regex, no-useless-escape, no-param-reassign, id-length */\n/* eslint max-lines: [\"error\", {\"max\": 350, \"skipBlankLines\": true}] */\n\n/**\n * A plain Javascript component that handles the form filter.\n * @class\n * @augments Component\n */\n\nimport delayed from \"src/decidim/delayed\"\nimport CheckBoxesTree from \"src/decidim/check_boxes_tree\"\nimport { registerCallback, unregisterCallback, pushState, replaceState, state } from \"src/decidim/history\"\nimport DataPicker from \"src/decidim/data_picker\"\n\nexport default class FormFilterComponent {\n  constructor($form) {\n    this.$form = $form;\n    this.id = this.$form.attr(\"id\") || this._getUID();\n    this.mounted = false;\n    this.changeEvents = true;\n    this.theCheckBoxesTree = new CheckBoxesTree();\n    this.theDataPicker = window.theDataPicker || new DataPicker($(\".data-picker\"));\n\n    this._updateInitialState();\n    this._onFormChange = delayed(this, this._onFormChange.bind(this));\n    this._onFormSubmit = delayed(this, this._onFormSubmit.bind(this));\n    this._onPopState = this._onPopState.bind(this);\n\n    if (window.Decidim.PopStateHandler) {\n      this.popStateSubmiter = false;\n    } else {\n      this.popStateSubmiter = true;\n      window.Decidim.PopStateHandler = this.id;\n    }\n  }\n\n  /**\n   * Handles the logic for unmounting the component\n   * @public\n   * @returns {Void} - Returns nothing\n   */\n  unmountComponent() {\n    if (this.mounted) {\n      this.mounted = false;\n      this.$form.off(\"change\", \"input, select\", this._onFormChange);\n      this.$form.off(\"submit\", this._onFormSubmit);\n\n      unregisterCallback(`filters-${this.id}`)\n    }\n  }\n\n  /**\n   * Handles the logic for mounting the component\n   * @public\n   * @returns {Void} - Returns nothing\n   */\n  mountComponent() {\n    if (this.$form.length > 0 && !this.mounted) {\n      this.mounted = true;\n      let queue = 0;\n\n      let contentContainer = $(this.$form.closest(\".filters\").parent().find(\".skip\").attr(\"href\"));\n      if (contentContainer.length === 0 && this.$form.data(\"remoteFill\")) {\n        contentContainer = this.$form.data(\"remoteFill\");\n      }\n      this.$form.on(\"change\", \"input:not([data-disable-dynamic-change]), select:not([data-disable-dynamic-change])\", this._onFormChange);\n      this.$form.on(\"submit\", this._onFormSubmit);\n\n      this.currentFormRequest = null;\n      this.$form.on(\"ajax:beforeSend\", (e) => {\n        if (this.currentFormRequest) {\n          this.currentFormRequest.abort();\n        }\n        this.currentFormRequest = e.originalEvent.detail[0];\n        queue += 1;\n        if (queue > 0 && contentContainer.length > 0 && !contentContainer.hasClass(\"spinner-container\")) {\n          contentContainer.addClass(\"spinner-container\");\n        }\n      });\n\n      this.$form.on(\"ajax:success\", () => {\n        queue -= 1;\n        if (queue <= 0 && contentContainer.length > 0) {\n          contentContainer.removeClass(\"spinner-container\");\n        }\n      });\n\n      this.$form.on(\"ajax:error\", () => {\n        queue -= 1;\n        if (queue <= 0 && contentContainer.length > 0) {\n          contentContainer.removeClass(\"spinner-container\");\n        }\n        this.$form.find(\".spinner-container\").addClass(\"hide\");\n      });\n\n      this.theCheckBoxesTree.setContainerForm(this.$form);\n\n      registerCallback(`filters-${this.id}`, (currentState) => {\n        this._onPopState(currentState);\n      });\n    }\n  }\n\n  /**\n   * Sets path in the browser history with the initial filters state, to allow to restoring it when using browser history.\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  _updateInitialState() {\n    const [initialPath, initialState] = this._currentStateAndPath();\n    initialState._path = initialPath\n    replaceState(null, initialState);\n  }\n\n  /**\n   * Finds the current location.\n   * @param {boolean} withHost - include the host part in the returned location\n   * @private\n   * @returns {String} - Returns the current location.\n   */\n  _getLocation(withHost = true) {\n    const currentState = state();\n    let path = \"\";\n\n    if (currentState && currentState._path) {\n      path = currentState._path;\n    } else {\n      path = window.location.pathname + window.location.search + window.location.hash;\n    }\n\n    if (withHost) {\n      return window.location.origin + path;\n    }\n    return path;\n  }\n\n  /**\n   * Parse current location and get filter values.\n   * @private\n   * @returns {Object} - An object where a key correspond to a filter field\n   *                     and the value is the current value for the filter.\n   */\n  _parseLocationFilterValues() {\n    // Every location param is constructed like this: filter[key]=value\n    let regexpResult = decodeURIComponent(this._getLocation()).match(/filter\\[([^\\]]*)\\](?:\\[\\])?=([^&]*)/g);\n\n    // The RegExp g flag returns null or an array of coincidences. It doesn't return the match groups\n    if (regexpResult) {\n      const filterParams = regexpResult.reduce((acc, result) => {\n        const [, key, array, value] = result.match(/filter\\[([^\\]]*)\\](\\[\\])?=([^&]*)/);\n        if (array) {\n          if (!acc[key]) {\n            acc[key] = [];\n          }\n          acc[key].push(value);\n        } else {\n          acc[key] = value;\n        }\n        return acc;\n      }, {});\n\n      return filterParams;\n    }\n\n    return null;\n  }\n\n  /**\n   * Parse current location and get the current order.\n   * @private\n   * @returns {string} - The current order\n   */\n  _parseLocationOrderValue() {\n    const url = this._getLocation();\n    const match = url.match(/order=([^&]*)/);\n    const $orderMenu = this.$form.find(\".order-by .menu\");\n    let order = $orderMenu.find(\".menu a:first\").data(\"order\");\n\n    if (match) {\n      order = match[1];\n    }\n\n    return order;\n  }\n\n  /**\n   * Clears the form to start with a clean state.\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  _clearForm() {\n    this.$form.find(\"input[type=checkbox]\").each((index, element) => {\n      element.checked = element.indeterminate = false;\n    });\n    this.$form.find(\"input[type=radio]\").attr(\"checked\", false);\n    this.$form.find(\".data-picker\").each((_index, picker) => {\n      this.theDataPicker.clear(picker);\n    });\n\n    // This ensure the form is reset in a valid state where a fieldset of\n    // radio buttons has the first selected.\n    this.$form.find(\"fieldset input[type=radio]:first\").each(function () {\n      // I need the this to iterate a jQuery collection\n      $(this)[0].checked = true; // eslint-disable-line no-invalid-this\n    });\n  }\n\n  /**\n   * Handles the logic when going back to a previous state in the filter form.\n   * @private\n   * @param {Object} currentState - state stored along with location URL\n   * @returns {Void} - Returns nothing.\n   */\n  _onPopState(currentState) {\n    this.changeEvents = false;\n    this._clearForm();\n\n    const filterParams = this._parseLocationFilterValues();\n    const currentOrder = this._parseLocationOrderValue();\n\n    this.$form.find(\"input.order_filter\").val(currentOrder);\n\n    if (filterParams) {\n      const fieldIds = Object.keys(filterParams);\n\n      // Iterate the filter params and set the correct form values\n      fieldIds.forEach((fieldName) => {\n        let value = filterParams[fieldName];\n\n        if (Array.isArray(value)) {\n          let checkboxes = this.$form.find(`input[type=checkbox][name=\"filter[${fieldName}][]\"]`);\n          this.theCheckBoxesTree.updateChecked(checkboxes, value);\n        } else {\n          this.$form.find(`*[name=\"filter[${fieldName}]\"]`).each((index, element) => {\n            switch (element.type) {\n            case \"hidden\":\n              break;\n            case \"radio\":\n            case \"checkbox\":\n              element.checked = value === element.value;\n              break;\n            default:\n              element.value = value;\n            }\n          });\n        }\n      });\n    }\n\n    // Retrieves picker information for selected values (value, text and link) from the state object\n    $(\".data-picker\", this.$form).each((_index, picker) => {\n      let pickerState = currentState[picker.id];\n      if (pickerState) {\n        this.theDataPicker.load(picker, pickerState);\n      }\n    })\n\n    // Only one instance should submit the form on browser history navigation\n    if (this.popStateSubmiter) {\n      Rails.fire(this.$form[0], \"submit\", { from: \"pop\" });\n    }\n\n    this.changeEvents = true;\n  }\n\n  /**\n   * Handles the logic to decide whether the form should be submitted or not\n   * after a form change event. The form is only submitted when changes have\n   * occurred.\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  _onFormChange() {\n    if (!this.changeEvents) {\n      return;\n    }\n\n    const [newPath] = this._currentStateAndPath();\n    const path = this._getLocation(false);\n\n    if (newPath === path) {\n      return;\n    }\n\n    Rails.fire(this.$form[0], \"submit\");\n  }\n\n  /**\n   * Saves the current state of the search on form submit to update the search\n   * parameters to the URL and store the picker states.\n   * @private\n   * @param {jQuery.Event} ev The event that caused the form to submit.\n   * @returns {Void} - Returns nothing.\n   */\n  _onFormSubmit(ev) {\n    const eventDetail = ev.originalEvent.detail;\n    if (eventDetail && eventDetail.from === \"pop\") {\n      return;\n    }\n\n    const [newPath, newState] = this._currentStateAndPath();\n\n    pushState(newPath, newState);\n    this._saveFilters(newPath);\n  }\n\n  /**\n   * Calculates the path and the state associated to the filters inputs.\n   * @private\n   * @returns {Array} - Returns an array with the path and the state for the current filters state.\n   */\n  _currentStateAndPath() {\n    const formAction = this.$form.attr(\"action\");\n    const params = this.$form.find(\":not(.ignore-filters)\").find(\"select:not(.ignore-filter), input:not(.ignore-filter)\").serialize();\n\n    let path = \"\";\n    let currentState = {};\n\n    if (formAction.indexOf(\"?\") < 0) {\n      path = `${formAction}?${params}`;\n    } else {\n      path = `${formAction}&${params}`;\n    }\n\n    // Stores picker information for selected values (value, text and link) in the currentState object\n    $(\".data-picker\", this.$form).each((_index, picker) => {\n      currentState[picker.id] = this.theDataPicker.save(picker);\n    })\n\n    return [path, currentState];\n  }\n\n  /**\n   * Generates a unique identifier for the form.\n   * @private\n   * @returns {String} - Returns a unique identifier\n   */\n  _getUID() {\n    return `filter-form-${new Date().getUTCMilliseconds()}-${Math.floor(Math.random() * 10000000)}`;\n  }\n\n  /**\n   * Saves the changed filters on sessionStorage API.\n   * @private\n   * @param {string} pathWithQueryStrings - path with all the query strings for filter. To be used with backToListLink().\n   * @returns {Void} - Returns nothing.\n   */\n  _saveFilters(pathWithQueryStrings) {\n    if (!window.sessionStorage) {\n      return;\n    }\n\n    const pathName = this.$form.attr(\"action\");\n    sessionStorage.setItem(\"filteredParams\", JSON.stringify({[pathName]: pathWithQueryStrings}));\n  }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}