{"ast":null,"code":"$(function () {\n  var $projects = $(\"#projects, #project\");\n  var $budgetSummaryTotal = $(\".budget-summary__total\");\n  var $budgetExceedModal = $(\"#budget-excess\");\n  var $budgetSummary = $(\".budget-summary__progressbox\");\n  var $voteButton = $(\".budget-vote-button\");\n  var totalAllocation = parseInt($budgetSummaryTotal.attr(\"data-total-allocation\"), 10);\n  var cancelEvent = function cancelEvent(event) {\n    $(event.currentTarget).removeClass(\"loading-spinner\");\n    event.stopPropagation();\n    event.preventDefault();\n  };\n  $voteButton.on(\"click\", \"span\", function () {\n    $(\".budget-list__action\").click();\n  });\n  $projects.on(\"click\", \".budget-list__action\", function (event) {\n    var currentAllocation = parseInt($budgetSummary.attr(\"data-current-allocation\"), 10);\n    var $currentTarget = $(event.currentTarget);\n    var projectAllocation = parseInt($currentTarget.attr(\"data-allocation\"), 10);\n    if (!$currentTarget.attr(\"data-open\")) {\n      $currentTarget.addClass(\"loading-spinner\");\n    }\n    if ($currentTarget.attr(\"disabled\")) {\n      cancelEvent(event);\n    } else if ($currentTarget.attr(\"data-add\") === \"true\" && currentAllocation + projectAllocation > totalAllocation) {\n      $budgetExceedModal.foundation(\"toggle\");\n      cancelEvent(event);\n    }\n  });\n});","map":{"version":3,"names":["$","$projects","$budgetSummaryTotal","$budgetExceedModal","$budgetSummary","$voteButton","totalAllocation","parseInt","attr","cancelEvent","event","currentTarget","removeClass","stopPropagation","preventDefault","on","click","currentAllocation","$currentTarget","projectAllocation","addClass","foundation"],"sources":["/home/nico/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-budgets-0.27.3/app/packs/src/decidim/budgets/projects.js"],"sourcesContent":["$(() => {\n  const $projects = $(\"#projects, #project\");\n  const $budgetSummaryTotal = $(\".budget-summary__total\");\n  const $budgetExceedModal = $(\"#budget-excess\");\n  const $budgetSummary = $(\".budget-summary__progressbox\");\n  const $voteButton = $(\".budget-vote-button\");\n  const totalAllocation = parseInt($budgetSummaryTotal.attr(\"data-total-allocation\"), 10);\n\n  const cancelEvent = (event) => {\n    $(event.currentTarget).removeClass(\"loading-spinner\");\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  $voteButton.on(\"click\", \"span\", () => {\n    $(\".budget-list__action\").click();\n  });\n\n  $projects.on(\"click\", \".budget-list__action\", (event) => {\n    const currentAllocation = parseInt($budgetSummary.attr(\"data-current-allocation\"), 10);\n    const $currentTarget = $(event.currentTarget);\n    const projectAllocation = parseInt($currentTarget.attr(\"data-allocation\"), 10);\n\n    if (!$currentTarget.attr(\"data-open\")) {\n      $currentTarget.addClass(\"loading-spinner\");\n    }\n\n    if ($currentTarget.attr(\"disabled\")) {\n      cancelEvent(event);\n    } else if (($currentTarget.attr(\"data-add\") === \"true\") && ((currentAllocation + projectAllocation) > totalAllocation)) {\n      $budgetExceedModal.foundation(\"toggle\");\n      cancelEvent(event);\n    }\n  });\n});\n"],"mappings":"AAAAA,CAAC,CAAC,YAAM;EACN,IAAMC,SAAS,GAAGD,CAAC,CAAC,qBAAqB,CAAC;EAC1C,IAAME,mBAAmB,GAAGF,CAAC,CAAC,wBAAwB,CAAC;EACvD,IAAMG,kBAAkB,GAAGH,CAAC,CAAC,gBAAgB,CAAC;EAC9C,IAAMI,cAAc,GAAGJ,CAAC,CAAC,8BAA8B,CAAC;EACxD,IAAMK,WAAW,GAAGL,CAAC,CAAC,qBAAqB,CAAC;EAC5C,IAAMM,eAAe,GAAGC,QAAQ,CAACL,mBAAmB,CAACM,IAAI,CAAC,uBAAuB,CAAC,EAAE,EAAE,CAAC;EAEvF,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAIC,KAAK,EAAK;IAC7BV,CAAC,CAACU,KAAK,CAACC,aAAa,CAAC,CAACC,WAAW,CAAC,iBAAiB,CAAC;IACrDF,KAAK,CAACG,eAAe,CAAC,CAAC;IACvBH,KAAK,CAACI,cAAc,CAAC,CAAC;EACxB,CAAC;EAEDT,WAAW,CAACU,EAAE,CAAC,OAAO,EAAE,MAAM,EAAE,YAAM;IACpCf,CAAC,CAAC,sBAAsB,CAAC,CAACgB,KAAK,CAAC,CAAC;EACnC,CAAC,CAAC;EAEFf,SAAS,CAACc,EAAE,CAAC,OAAO,EAAE,sBAAsB,EAAE,UAACL,KAAK,EAAK;IACvD,IAAMO,iBAAiB,GAAGV,QAAQ,CAACH,cAAc,CAACI,IAAI,CAAC,yBAAyB,CAAC,EAAE,EAAE,CAAC;IACtF,IAAMU,cAAc,GAAGlB,CAAC,CAACU,KAAK,CAACC,aAAa,CAAC;IAC7C,IAAMQ,iBAAiB,GAAGZ,QAAQ,CAACW,cAAc,CAACV,IAAI,CAAC,iBAAiB,CAAC,EAAE,EAAE,CAAC;IAE9E,IAAI,CAACU,cAAc,CAACV,IAAI,CAAC,WAAW,CAAC,EAAE;MACrCU,cAAc,CAACE,QAAQ,CAAC,iBAAiB,CAAC;IAC5C;IAEA,IAAIF,cAAc,CAACV,IAAI,CAAC,UAAU,CAAC,EAAE;MACnCC,WAAW,CAACC,KAAK,CAAC;IACpB,CAAC,MAAM,IAAKQ,cAAc,CAACV,IAAI,CAAC,UAAU,CAAC,KAAK,MAAM,IAAOS,iBAAiB,GAAGE,iBAAiB,GAAIb,eAAgB,EAAE;MACtHH,kBAAkB,CAACkB,UAAU,CAAC,QAAQ,CAAC;MACvCZ,WAAW,CAACC,KAAK,CAAC;IACpB;EACF,CAAC,CAAC;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}