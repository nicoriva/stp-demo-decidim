{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nvar _excluded = [\"title\"];\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nimport { imageCache, staticResourceCache, offlineFallback } from \"workbox-recipes\";\nimport { registerRoute } from \"workbox-routing\";\nimport { NetworkFirst, NetworkOnly } from \"workbox-strategies\";\nimport { CacheableResponsePlugin } from \"workbox-cacheable-response\";\nimport { ExpirationPlugin } from \"workbox-expiration\";\n\n// https://developers.google.com/web/tools/workbox/guides/troubleshoot-and-debug#debugging_workbox\nself.__WB_DISABLE_DEV_LOGS = true;\n\n/**\n * This is a workaround to bypass a webpack compilation error\n *\n * The InjectManifest function requires the __WB_MANIFEST somewhere in this file,\n * however, we cannot add precacheAndRoute as the issue suggests,\n * as the other workbox-recipes won't work properly\n *\n * See more: https://github.com/GoogleChrome/workbox/issues/2519#issuecomment-634164566\n */\n// eslint-disable-next-line no-unused-vars\nvar dummy = self.__WB_MANIFEST;\nself.addEventListener(\"push\", function (event) {\n  var _event$data$json = event.data.json(),\n    title = _event$data$json.title,\n    opts = _objectWithoutProperties(_event$data$json, _excluded);\n  event.waitUntil(self.registration.showNotification(title, _objectSpread({}, opts)));\n});\n\n// Event handler for click on the notification event\nself.addEventListener(\"notificationclick\", function (event) {\n  event.notification.close();\n  // Get all the Window clients\n  event.waitUntil(self.clients.matchAll({\n    type: \"window\"\n  }).then(function (clientsArr) {\n    var windowToFocus = clientsArr.find(function (windowClient) {\n      return windowClient.url === event.notification.data.url;\n    });\n    if (windowToFocus) {\n      // If a Window tab matching the targeted URL already exists, focus that\n      windowToFocus.focus();\n    } else {\n      // Otherwise, open a new tab to the applicable URL and focus it\n      self.clients.openWindow(event.notification.data.url).then(function (windowClient) {\n        return windowClient && windowClient.focus();\n      });\n    }\n  }));\n});\n\n// avoid caching admin or users paths\nregisterRoute(function (_ref) {\n  var url = _ref.url;\n  return [\"/admin/\", \"/users/\"].some(function (path) {\n    return url.pathname.startsWith(path);\n  });\n}, new NetworkOnly());\n\n// https://developers.google.com/web/tools/workbox/modules/workbox-recipes#pattern_3\nregisterRoute(function (_ref2) {\n  var request = _ref2.request;\n  return request.mode === \"navigate\";\n}, new NetworkFirst({\n  networkTimeoutSeconds: 3,\n  cacheName: \"pages\",\n  plugins: [new CacheableResponsePlugin({\n    statuses: [0, 200]\n  }), new ExpirationPlugin({\n    maxAgeSeconds: 60 * 60\n  })]\n}));\n\n// common recipes\nstaticResourceCache();\nimageCache();\nofflineFallback({\n  pageFallback: \"/offline\"\n});","map":{"version":3,"names":["imageCache","staticResourceCache","offlineFallback","registerRoute","NetworkFirst","NetworkOnly","CacheableResponsePlugin","ExpirationPlugin","self","__WB_DISABLE_DEV_LOGS","dummy","__WB_MANIFEST","addEventListener","event","_event$data$json","data","json","title","opts","_objectWithoutProperties","_excluded","waitUntil","registration","showNotification","_objectSpread","notification","close","clients","matchAll","type","then","clientsArr","windowToFocus","find","windowClient","url","focus","openWindow","_ref","some","path","pathname","startsWith","_ref2","request","mode","networkTimeoutSeconds","cacheName","plugins","statuses","maxAgeSeconds","pageFallback"],"sources":["/home/nico/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.3/app/packs/src/decidim/sw/sw.js"],"sourcesContent":["import {\n  imageCache,\n  staticResourceCache,\n  offlineFallback\n} from \"workbox-recipes\";\nimport { registerRoute } from \"workbox-routing\";\nimport { NetworkFirst, NetworkOnly } from \"workbox-strategies\";\nimport { CacheableResponsePlugin } from \"workbox-cacheable-response\";\nimport { ExpirationPlugin } from \"workbox-expiration\";\n\n\n// https://developers.google.com/web/tools/workbox/guides/troubleshoot-and-debug#debugging_workbox\nself.__WB_DISABLE_DEV_LOGS = true\n\n/**\n * This is a workaround to bypass a webpack compilation error\n *\n * The InjectManifest function requires the __WB_MANIFEST somewhere in this file,\n * however, we cannot add precacheAndRoute as the issue suggests,\n * as the other workbox-recipes won't work properly\n *\n * See more: https://github.com/GoogleChrome/workbox/issues/2519#issuecomment-634164566\n */\n// eslint-disable-next-line no-unused-vars\nconst dummy = self.__WB_MANIFEST;\n\nself.addEventListener(\"push\", (event) => {\n  const { title, ...opts } = event.data.json();\n  event.waitUntil(self.registration.showNotification(title, { ...opts }));\n});\n\n// Event handler for click on the notification event\nself.addEventListener(\"notificationclick\", (event) => {\n  event.notification.close();\n  // Get all the Window clients\n  event.waitUntil(\n    self.clients.matchAll({ type: \"window\" }).then((clientsArr) => {\n      const windowToFocus = clientsArr.find((windowClient) => windowClient.url === event.notification.data.url);\n      if (windowToFocus) {\n        // If a Window tab matching the targeted URL already exists, focus that\n        windowToFocus.focus()\n      } else {\n        // Otherwise, open a new tab to the applicable URL and focus it\n        self.clients.\n          openWindow(event.notification.data.url).\n          then((windowClient) => windowClient && windowClient.focus());\n      }\n    })\n  );\n});\n\n// avoid caching admin or users paths\nregisterRoute(\n  ({ url }) => [\"/admin/\", \"/users/\"].some((path) => url.pathname.startsWith(path)),\n  new NetworkOnly()\n);\n\n// https://developers.google.com/web/tools/workbox/modules/workbox-recipes#pattern_3\nregisterRoute(\n  ({ request }) => request.mode === \"navigate\",\n  new NetworkFirst({\n    networkTimeoutSeconds: 3,\n    cacheName: \"pages\",\n    plugins: [\n      new CacheableResponsePlugin({\n        statuses: [0, 200]\n      }),\n      new ExpirationPlugin({\n        maxAgeSeconds: 60 * 60\n      })\n    ]\n  }),\n);\n\n// common recipes\nstaticResourceCache();\n\nimageCache();\n\nofflineFallback({ pageFallback: \"/offline\" });\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}