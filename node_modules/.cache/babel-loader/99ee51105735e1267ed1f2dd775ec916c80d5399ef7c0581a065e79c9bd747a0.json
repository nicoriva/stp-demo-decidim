{"ast":null,"code":"import { EmojiButton } from \"@joeattardi/emoji-button\";\n\n// eslint-disable-next-line require-jsdoc\nexport default function addInputEmoji() {\n  var containers = document.querySelectorAll(\"[data-input-emoji]\");\n  if (containers.length) {\n    containers.forEach(function (elem) {\n      var _elem$closest;\n      var picker = new EmojiButton({\n        position: \"bottom-end\",\n        rootElement: ((_elem$closest = elem.closest(\"form\")) === null || _elem$closest === void 0 ? void 0 : _elem$closest.parentElement) || document.body,\n        zIndex: 2000\n      });\n\n      // if the selector is inside a modal window\n      // this allows shows the emoji menu uncut\n      var reveal = elem.closest(\"[data-reveal]\");\n      if (reveal) {\n        reveal.style.overflowY = \"unset\";\n      }\n      var wrapper = document.createElement(\"div\");\n      wrapper.className = \"emoji__container\";\n      var btnContainer = document.createElement(\"div\");\n      btnContainer.className = \"emoji__trigger\";\n      var btn = document.createElement(\"div\");\n      btn.className = \"emoji__button\";\n      btn.innerHTML = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"smile\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 496 512\"><path fill=\"currentColor\" d=\"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z\"></path></svg>';\n      var parent = elem.parentNode;\n      parent.insertBefore(wrapper, elem);\n      wrapper.appendChild(elem);\n      wrapper.appendChild(btnContainer);\n      btnContainer.appendChild(btn);\n\n      // The form errors need to be in the same container with the field they\n      // belong to for Foundation Abide to show them automatically.\n      parent.querySelectorAll(\".form-error\").forEach(function (el) {\n        return wrapper.appendChild(el);\n      });\n      var handlerPicker = function handlerPicker() {\n        picker.togglePicker(btnContainer);\n      };\n      btnContainer.addEventListener(\"click\", handlerPicker);\n      elem.addEventListener(\"characterCounter\", function (event) {\n        if (event.detail.remaining >= 4) {\n          btnContainer.addEventListener(\"click\", handlerPicker);\n          btnContainer.removeAttribute(\"style\");\n        } else {\n          btnContainer.removeEventListener(\"click\", handlerPicker);\n          btnContainer.setAttribute(\"style\", \"color:lightgrey\");\n        }\n      });\n      picker.on(\"emoji\", function (_ref) {\n        var emoji = _ref.emoji;\n        elem.value += \" \".concat(emoji, \" \");\n        var event = new Event(\"emoji.added\");\n        elem.dispatchEvent(event);\n      });\n    });\n  }\n}\n;","map":{"version":3,"names":["EmojiButton","addInputEmoji","containers","document","querySelectorAll","length","forEach","elem","_elem$closest","picker","position","rootElement","closest","parentElement","body","zIndex","reveal","style","overflowY","wrapper","createElement","className","btnContainer","btn","innerHTML","parent","parentNode","insertBefore","appendChild","el","handlerPicker","togglePicker","addEventListener","event","detail","remaining","removeAttribute","removeEventListener","setAttribute","on","_ref","emoji","value","concat","Event","dispatchEvent"],"sources":["/home/nico/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.3/app/packs/src/decidim/input_emoji.js"],"sourcesContent":["import {EmojiButton} from \"@joeattardi/emoji-button\";\n\n// eslint-disable-next-line require-jsdoc\nexport default function addInputEmoji() {\n  const containers = document.querySelectorAll(\"[data-input-emoji]\");\n\n  if (containers.length) {\n    containers.forEach((elem) => {\n      const picker = new EmojiButton({\n        position: \"bottom-end\",\n        rootElement: elem.closest(\"form\")?.parentElement || document.body,\n        zIndex: 2000\n      });\n\n      // if the selector is inside a modal window\n      // this allows shows the emoji menu uncut\n      const reveal = elem.closest(\"[data-reveal]\")\n      if (reveal) {\n        reveal.style.overflowY = \"unset\"\n      }\n\n      const wrapper = document.createElement(\"div\");\n      wrapper.className = \"emoji__container\"\n      const btnContainer = document.createElement(\"div\");\n      btnContainer.className = \"emoji__trigger\"\n      const btn = document.createElement(\"div\");\n      btn.className = \"emoji__button\"\n      btn.innerHTML = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"smile\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 496 512\"><path fill=\"currentColor\" d=\"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z\"></path></svg>'\n\n      const parent = elem.parentNode;\n      parent.insertBefore(wrapper, elem);\n      wrapper.appendChild(elem);\n      wrapper.appendChild(btnContainer);\n      btnContainer.appendChild(btn);\n\n      // The form errors need to be in the same container with the field they\n      // belong to for Foundation Abide to show them automatically.\n      parent.querySelectorAll(\".form-error\").forEach((el) => wrapper.appendChild(el));\n\n      let handlerPicker = function () {\n        picker.togglePicker(btnContainer);\n      }\n\n      btnContainer.addEventListener(\"click\", handlerPicker);\n\n      elem.addEventListener(\"characterCounter\", (event) => {\n        if (event.detail.remaining >= 4) {\n          btnContainer.addEventListener(\"click\", handlerPicker);\n          btnContainer.removeAttribute(\"style\");\n        } else {\n          btnContainer.removeEventListener(\"click\", handlerPicker);\n          btnContainer.setAttribute(\"style\", \"color:lightgrey\");\n        }\n      });\n\n\n      picker.on(\"emoji\", ({emoji}) => {\n        elem.value += ` ${emoji} `\n\n        const event = new Event(\"emoji.added\");\n        elem.dispatchEvent(event);\n      });\n    })\n  }\n};\n"],"mappings":"AAAA,SAAQA,WAAW,QAAO,0BAA0B;;AAEpD;AACA,eAAe,SAASC,aAAaA,CAAA,EAAG;EACtC,IAAMC,UAAU,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,oBAAoB,CAAC;EAElE,IAAIF,UAAU,CAACG,MAAM,EAAE;IACrBH,UAAU,CAACI,OAAO,CAAC,UAACC,IAAI,EAAK;MAAA,IAAAC,aAAA;MAC3B,IAAMC,MAAM,GAAG,IAAIT,WAAW,CAAC;QAC7BU,QAAQ,EAAE,YAAY;QACtBC,WAAW,EAAE,EAAAH,aAAA,GAAAD,IAAI,CAACK,OAAO,CAAC,MAAM,CAAC,cAAAJ,aAAA,uBAApBA,aAAA,CAAsBK,aAAa,KAAIV,QAAQ,CAACW,IAAI;QACjEC,MAAM,EAAE;MACV,CAAC,CAAC;;MAEF;MACA;MACA,IAAMC,MAAM,GAAGT,IAAI,CAACK,OAAO,CAAC,eAAe,CAAC;MAC5C,IAAII,MAAM,EAAE;QACVA,MAAM,CAACC,KAAK,CAACC,SAAS,GAAG,OAAO;MAClC;MAEA,IAAMC,OAAO,GAAGhB,QAAQ,CAACiB,aAAa,CAAC,KAAK,CAAC;MAC7CD,OAAO,CAACE,SAAS,GAAG,kBAAkB;MACtC,IAAMC,YAAY,GAAGnB,QAAQ,CAACiB,aAAa,CAAC,KAAK,CAAC;MAClDE,YAAY,CAACD,SAAS,GAAG,gBAAgB;MACzC,IAAME,GAAG,GAAGpB,QAAQ,CAACiB,aAAa,CAAC,KAAK,CAAC;MACzCG,GAAG,CAACF,SAAS,GAAG,eAAe;MAC/BE,GAAG,CAACC,SAAS,GAAG,6rBAA6rB;MAE7sB,IAAMC,MAAM,GAAGlB,IAAI,CAACmB,UAAU;MAC9BD,MAAM,CAACE,YAAY,CAACR,OAAO,EAAEZ,IAAI,CAAC;MAClCY,OAAO,CAACS,WAAW,CAACrB,IAAI,CAAC;MACzBY,OAAO,CAACS,WAAW,CAACN,YAAY,CAAC;MACjCA,YAAY,CAACM,WAAW,CAACL,GAAG,CAAC;;MAE7B;MACA;MACAE,MAAM,CAACrB,gBAAgB,CAAC,aAAa,CAAC,CAACE,OAAO,CAAC,UAACuB,EAAE;QAAA,OAAKV,OAAO,CAACS,WAAW,CAACC,EAAE,CAAC;MAAA,EAAC;MAE/E,IAAIC,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAe;QAC9BrB,MAAM,CAACsB,YAAY,CAACT,YAAY,CAAC;MACnC,CAAC;MAEDA,YAAY,CAACU,gBAAgB,CAAC,OAAO,EAAEF,aAAa,CAAC;MAErDvB,IAAI,CAACyB,gBAAgB,CAAC,kBAAkB,EAAE,UAACC,KAAK,EAAK;QACnD,IAAIA,KAAK,CAACC,MAAM,CAACC,SAAS,IAAI,CAAC,EAAE;UAC/Bb,YAAY,CAACU,gBAAgB,CAAC,OAAO,EAAEF,aAAa,CAAC;UACrDR,YAAY,CAACc,eAAe,CAAC,OAAO,CAAC;QACvC,CAAC,MAAM;UACLd,YAAY,CAACe,mBAAmB,CAAC,OAAO,EAAEP,aAAa,CAAC;UACxDR,YAAY,CAACgB,YAAY,CAAC,OAAO,EAAE,iBAAiB,CAAC;QACvD;MACF,CAAC,CAAC;MAGF7B,MAAM,CAAC8B,EAAE,CAAC,OAAO,EAAE,UAAAC,IAAA,EAAa;QAAA,IAAXC,KAAK,GAAAD,IAAA,CAALC,KAAK;QACxBlC,IAAI,CAACmC,KAAK,QAAAC,MAAA,CAAQF,KAAK,MAAG;QAE1B,IAAMR,KAAK,GAAG,IAAIW,KAAK,CAAC,aAAa,CAAC;QACtCrC,IAAI,CAACsC,aAAa,CAACZ,KAAK,CAAC;MAC3B,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AACF;AAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}