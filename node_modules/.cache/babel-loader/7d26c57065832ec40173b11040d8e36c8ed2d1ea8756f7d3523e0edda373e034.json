{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nimport * as L from \"leaflet\";\nimport MapController from \"src/decidim/map/controller\";\nimport \"src/decidim/vendor/leaflet-tilelayer-here\";\nvar MapDragMarkerController = /*#__PURE__*/function (_MapController) {\n  _inherits(MapDragMarkerController, _MapController);\n  var _super = _createSuper(MapDragMarkerController);\n  function MapDragMarkerController() {\n    _classCallCheck(this, MapDragMarkerController);\n    return _super.apply(this, arguments);\n  }\n  _createClass(MapDragMarkerController, [{\n    key: \"start\",\n    value: function start() {\n      if (this.config.marker) {\n        this.addMarker(this.config.marker);\n      } else {\n        this.map.fitWorld();\n      }\n    }\n  }, {\n    key: \"addMarker\",\n    value: function addMarker(markerData) {\n      var _this = this;\n      if (markerData.latitude === null || markerData.longitude === null) {\n        return;\n      }\n      var coordinates = {\n        lat: markerData.latitude,\n        lng: markerData.longitude\n      };\n      this.triggerEvent(\"coordinates\", [coordinates]);\n      this.marker = L.marker(coordinates, {\n        icon: this.createIcon(),\n        keyboard: true,\n        title: markerData.title,\n        draggable: true\n      });\n      this.marker.on(\"drag\", function (ev) {\n        _this.triggerEvent(\"coordinates\", [ev.target.getLatLng()]);\n      });\n      this.marker.addTo(this.map);\n      var zoom = parseInt(this.config.zoom, 10) || 14;\n      this.map.setView(coordinates, zoom);\n    }\n  }, {\n    key: \"getMarker\",\n    value: function getMarker() {\n      return this.marker;\n    }\n  }, {\n    key: \"removeMarker\",\n    value: function removeMarker() {\n      if (this.marker) {\n        this.marker.remove();\n        this.marker = null;\n      }\n    }\n  }]);\n  return MapDragMarkerController;\n}(MapController);\nexport { MapDragMarkerController as default };","map":{"version":3,"names":["L","MapController","MapDragMarkerController","_MapController","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","start","config","marker","addMarker","map","fitWorld","markerData","_this","latitude","longitude","coordinates","lat","lng","triggerEvent","icon","createIcon","keyboard","title","draggable","on","ev","target","getLatLng","addTo","zoom","parseInt","setView","getMarker","removeMarker","remove","default"],"sources":["/home/nico/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.3/app/packs/src/decidim/map/controller/drag_marker.js"],"sourcesContent":["import * as L from \"leaflet\";\nimport MapController from \"src/decidim/map/controller\"\nimport \"src/decidim/vendor/leaflet-tilelayer-here\"\n\nexport default class MapDragMarkerController extends MapController {\n  start() {\n    if (this.config.marker) {\n      this.addMarker(this.config.marker);\n    } else {\n      this.map.fitWorld();\n    }\n  }\n\n  addMarker(markerData) {\n    if (markerData.latitude === null || markerData.longitude === null) {\n      return;\n    }\n\n    const coordinates = {\n      lat: markerData.latitude,\n      lng: markerData.longitude\n    };\n    this.triggerEvent(\"coordinates\", [coordinates]);\n\n    this.marker = L.marker(coordinates, {\n      icon: this.createIcon(),\n      keyboard: true,\n      title: markerData.title,\n      draggable: true\n    });\n    this.marker.on(\"drag\", (ev) => {\n      this.triggerEvent(\"coordinates\", [ev.target.getLatLng()]);\n    });\n    this.marker.addTo(this.map);\n\n    const zoom = parseInt(this.config.zoom, 10) || 14;\n    this.map.setView(coordinates, zoom);\n  }\n\n  getMarker() {\n    return this.marker;\n  }\n\n  removeMarker() {\n    if (this.marker) {\n      this.marker.remove();\n      this.marker = null;\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,CAAC,MAAM,SAAS;AAC5B,OAAOC,aAAa,MAAM,4BAA4B;AACtD,OAAO,2CAA2C;AAAA,IAE7BC,uBAAuB,0BAAAC,cAAA;EAAAC,SAAA,CAAAF,uBAAA,EAAAC,cAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,uBAAA;EAAA,SAAAA,wBAAA;IAAAK,eAAA,OAAAL,uBAAA;IAAA,OAAAG,MAAA,CAAAG,KAAA,OAAAC,SAAA;EAAA;EAAAC,YAAA,CAAAR,uBAAA;IAAAS,GAAA;IAAAC,KAAA,EAC1C,SAAAC,MAAA,EAAQ;MACN,IAAI,IAAI,CAACC,MAAM,CAACC,MAAM,EAAE;QACtB,IAAI,CAACC,SAAS,CAAC,IAAI,CAACF,MAAM,CAACC,MAAM,CAAC;MACpC,CAAC,MAAM;QACL,IAAI,CAACE,GAAG,CAACC,QAAQ,CAAC,CAAC;MACrB;IACF;EAAC;IAAAP,GAAA;IAAAC,KAAA,EAED,SAAAI,UAAUG,UAAU,EAAE;MAAA,IAAAC,KAAA;MACpB,IAAID,UAAU,CAACE,QAAQ,KAAK,IAAI,IAAIF,UAAU,CAACG,SAAS,KAAK,IAAI,EAAE;QACjE;MACF;MAEA,IAAMC,WAAW,GAAG;QAClBC,GAAG,EAAEL,UAAU,CAACE,QAAQ;QACxBI,GAAG,EAAEN,UAAU,CAACG;MAClB,CAAC;MACD,IAAI,CAACI,YAAY,CAAC,aAAa,EAAE,CAACH,WAAW,CAAC,CAAC;MAE/C,IAAI,CAACR,MAAM,GAAGf,CAAC,CAACe,MAAM,CAACQ,WAAW,EAAE;QAClCI,IAAI,EAAE,IAAI,CAACC,UAAU,CAAC,CAAC;QACvBC,QAAQ,EAAE,IAAI;QACdC,KAAK,EAAEX,UAAU,CAACW,KAAK;QACvBC,SAAS,EAAE;MACb,CAAC,CAAC;MACF,IAAI,CAAChB,MAAM,CAACiB,EAAE,CAAC,MAAM,EAAE,UAACC,EAAE,EAAK;QAC7Bb,KAAI,CAACM,YAAY,CAAC,aAAa,EAAE,CAACO,EAAE,CAACC,MAAM,CAACC,SAAS,CAAC,CAAC,CAAC,CAAC;MAC3D,CAAC,CAAC;MACF,IAAI,CAACpB,MAAM,CAACqB,KAAK,CAAC,IAAI,CAACnB,GAAG,CAAC;MAE3B,IAAMoB,IAAI,GAAGC,QAAQ,CAAC,IAAI,CAACxB,MAAM,CAACuB,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE;MACjD,IAAI,CAACpB,GAAG,CAACsB,OAAO,CAAChB,WAAW,EAAEc,IAAI,CAAC;IACrC;EAAC;IAAA1B,GAAA;IAAAC,KAAA,EAED,SAAA4B,UAAA,EAAY;MACV,OAAO,IAAI,CAACzB,MAAM;IACpB;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAED,SAAA6B,aAAA,EAAe;MACb,IAAI,IAAI,CAAC1B,MAAM,EAAE;QACf,IAAI,CAACA,MAAM,CAAC2B,MAAM,CAAC,CAAC;QACpB,IAAI,CAAC3B,MAAM,GAAG,IAAI;MACpB;IACF;EAAC;EAAA,OAAAb,uBAAA;AAAA,EA5CkDD,aAAa;AAAA,SAA7CC,uBAAuB,IAAAyC,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}