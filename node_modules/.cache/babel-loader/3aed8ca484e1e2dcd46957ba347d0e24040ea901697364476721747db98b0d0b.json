{"ast":null,"code":"/* eslint-disable no-invalid-this */\n$(function () {\n  var selectedResourcesCount = function selectedResourcesCount() {\n    return $(\".table-list .js-check-all-resources:checked\").length;\n  };\n  var selectedResourcesNotPublishedAnswerCount = function selectedResourcesNotPublishedAnswerCount() {\n    return $(\".table-list [data-published-state=false] .js-check-all-resources:checked\").length;\n  };\n  var selectedResourcesCountUpdate = function selectedResourcesCountUpdate() {\n    var selectedResources = selectedResourcesCount();\n    var selectedResourcesNotPublishedAnswer = selectedResourcesNotPublishedAnswerCount();\n    if (selectedResources === 0) {\n      $(\"#js-selected-resources-count\").text(\"\");\n    } else {\n      $(\"#js-selected-resources-count\").text(selectedResources);\n    }\n    if (selectedResources >= 2) {\n      $('button[data-action=\"merge-resources\"]').parent().show();\n    } else {\n      $('button[data-action=\"merge-resources\"]').parent().hide();\n    }\n    if (selectedResourcesNotPublishedAnswer > 0) {\n      $('button[data-action=\"publish-answers\"]').parent().show();\n      $(\"#js-form-publish-answers-number\").text(selectedResourcesNotPublishedAnswer);\n    } else {\n      $('button[data-action=\"publish-answers\"]').parent().hide();\n    }\n  };\n  var showBulkActionsButton = function showBulkActionsButton() {\n    if (selectedResourcesCount() > 0) {\n      $(\"#js-bulk-actions-button\").removeClass(\"hide\");\n    }\n  };\n  var hideBulkActionsButton = function hideBulkActionsButton() {\n    var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (selectedResourcesCount() === 0 || force === true) {\n      $(\"#js-bulk-actions-button\").addClass(\"hide\");\n      $(\"#js-bulk-actions-dropdown\").removeClass(\"is-open\");\n    }\n  };\n  var showOtherActionsButtons = function showOtherActionsButtons() {\n    $(\"#js-other-actions-wrapper\").removeClass(\"hide\");\n  };\n  var hideOtherActionsButtons = function hideOtherActionsButtons() {\n    $(\"#js-other-actions-wrapper\").addClass(\"hide\");\n  };\n  var hideBulkActionForms = function hideBulkActionForms() {\n    $(\".js-bulk-action-form\").addClass(\"hide\");\n  };\n  if ($(\"#js-bulk-actions-wrapper\").length === 0) {\n    return;\n  }\n\n  // Expose functions to make them available in .js.erb templates\n  window.hideBulkActionForms = hideBulkActionForms;\n  window.hideBulkActionsButton = hideBulkActionsButton;\n  window.showOtherActionsButtons = showOtherActionsButtons;\n  window.selectedResourcesCountUpdate = selectedResourcesCountUpdate;\n  if ($(\".js-bulk-action-form\").length) {\n    hideBulkActionForms();\n    $(\"#js-bulk-actions-button\").addClass(\"hide\");\n    $(\"#js-bulk-actions-dropdown ul li button\").on(\"click\", function (event) {\n      event.preventDefault();\n      var action = $(event.target).data(\"action\");\n      if (action) {\n        $(\"#js-form-\".concat(action)).on(\"submit\", function () {\n          $(\".layout-content > .callout-wrapper\").html(\"\");\n        });\n        $(\"#js-\".concat(action, \"-actions\")).removeClass(\"hide\");\n        hideBulkActionsButton(true);\n        hideOtherActionsButtons();\n      }\n    });\n\n    // select all checkboxes\n    $(\".js-check-all\").on(\"change\", function () {\n      $(\".js-check-all-resources\").prop(\"checked\", $(this).prop(\"checked\"));\n      if ($(this).prop(\"checked\")) {\n        $(\".js-check-all-resources\").closest(\"tr\").addClass(\"selected\");\n        showBulkActionsButton();\n      } else {\n        $(\".js-check-all-resources\").closest(\"tr\").removeClass(\"selected\");\n        hideBulkActionsButton();\n      }\n      selectedResourcesCountUpdate();\n    });\n\n    // resource checkbox change\n    $(\".table-list\").on(\"change\", \".js-check-all-resources\", function () {\n      var resourceId = $(this).val();\n      var checked = $(this).prop(\"checked\");\n\n      // uncheck \"select all\", if one of the listed checkbox item is unchecked\n      if ($(this).prop(\"checked\") === false) {\n        $(\".js-check-all\").prop(\"checked\", false);\n      }\n      // check \"select all\" if all checkbox resources are checked\n      if ($(\".js-check-all-resources:checked\").length === $(\".js-check-all-resources\").length) {\n        $(\".js-check-all\").prop(\"checked\", true);\n        showBulkActionsButton();\n      }\n      if ($(this).prop(\"checked\")) {\n        showBulkActionsButton();\n        $(this).closest(\"tr\").addClass(\"selected\");\n      } else {\n        hideBulkActionsButton();\n        $(this).closest(\"tr\").removeClass(\"selected\");\n      }\n      if ($(\".js-check-all-resources:checked\").length === 0) {\n        hideBulkActionsButton();\n      }\n      $(\".js-bulk-action-form\").find(\".js-resource-id-\".concat(resourceId)).prop(\"checked\", checked);\n      selectedResourcesCountUpdate();\n    });\n    $(\".js-cancel-bulk-action\").on(\"click\", function () {\n      hideBulkActionForms();\n      showBulkActionsButton();\n      showOtherActionsButtons();\n    });\n  }\n});\n/* eslint-enable no-invalid-this */","map":{"version":3,"names":["$","selectedResourcesCount","length","selectedResourcesNotPublishedAnswerCount","selectedResourcesCountUpdate","selectedResources","selectedResourcesNotPublishedAnswer","text","parent","show","hide","showBulkActionsButton","removeClass","hideBulkActionsButton","force","arguments","undefined","addClass","showOtherActionsButtons","hideOtherActionsButtons","hideBulkActionForms","window","on","event","preventDefault","action","target","data","concat","html","prop","closest","resourceId","val","checked","find"],"sources":["/home/nico/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-budgets-0.27.3/app/packs/src/decidim/budgets/admin/projects.js"],"sourcesContent":["/* eslint-disable no-invalid-this */\n$(() => {\n  const selectedResourcesCount = () => {\n    return $(\".table-list .js-check-all-resources:checked\").length\n  }\n\n  const selectedResourcesNotPublishedAnswerCount = () => {\n    return $(\".table-list [data-published-state=false] .js-check-all-resources:checked\").length\n  }\n\n  const selectedResourcesCountUpdate = () => {\n    const selectedResources = selectedResourcesCount();\n    const selectedResourcesNotPublishedAnswer = selectedResourcesNotPublishedAnswerCount();\n\n    if (selectedResources === 0) {\n      $(\"#js-selected-resources-count\").text(\"\")\n    } else {\n      $(\"#js-selected-resources-count\").text(selectedResources);\n    }\n\n    if (selectedResources >= 2) {\n      $('button[data-action=\"merge-resources\"]').parent().show();\n    } else {\n      $('button[data-action=\"merge-resources\"]').parent().hide();\n    }\n\n    if (selectedResourcesNotPublishedAnswer > 0) {\n      $('button[data-action=\"publish-answers\"]').parent().show();\n      $(\"#js-form-publish-answers-number\").text(selectedResourcesNotPublishedAnswer);\n    } else {\n      $('button[data-action=\"publish-answers\"]').parent().hide();\n    }\n  }\n\n  const showBulkActionsButton = () => {\n    if (selectedResourcesCount() > 0) {\n      $(\"#js-bulk-actions-button\").removeClass(\"hide\");\n    }\n  }\n\n  const hideBulkActionsButton = (force = false) => {\n    if (selectedResourcesCount() === 0 || force === true) {\n      $(\"#js-bulk-actions-button\").addClass(\"hide\");\n      $(\"#js-bulk-actions-dropdown\").removeClass(\"is-open\");\n    }\n  }\n\n  const showOtherActionsButtons = () => {\n    $(\"#js-other-actions-wrapper\").removeClass(\"hide\");\n  }\n\n  const hideOtherActionsButtons = () => {\n    $(\"#js-other-actions-wrapper\").addClass(\"hide\");\n  }\n\n  const hideBulkActionForms = () => {\n    $(\".js-bulk-action-form\").addClass(\"hide\");\n  }\n\n  if ($(\"#js-bulk-actions-wrapper\").length === 0) {\n    return;\n  }\n\n  // Expose functions to make them available in .js.erb templates\n  window.hideBulkActionForms = hideBulkActionForms;\n  window.hideBulkActionsButton = hideBulkActionsButton;\n  window.showOtherActionsButtons = showOtherActionsButtons;\n  window.selectedResourcesCountUpdate = selectedResourcesCountUpdate;\n\n\n  if ($(\".js-bulk-action-form\").length) {\n    hideBulkActionForms();\n    $(\"#js-bulk-actions-button\").addClass(\"hide\");\n\n    $(\"#js-bulk-actions-dropdown ul li button\").on(\"click\", (event) => {\n      event.preventDefault();\n      let action = $(event.target).data(\"action\");\n\n      if (action) {\n        $(`#js-form-${action}`).on(\"submit\", () => {\n          $(\".layout-content > .callout-wrapper\").html(\"\");\n        })\n\n        $(`#js-${action}-actions`).removeClass(\"hide\");\n        hideBulkActionsButton(true);\n        hideOtherActionsButtons();\n      }\n    })\n\n    // select all checkboxes\n    $(\".js-check-all\").on(\"change\", function() {\n      $(\".js-check-all-resources\").prop(\"checked\", $(this).prop(\"checked\"));\n\n      if ($(this).prop(\"checked\")) {\n        $(\".js-check-all-resources\").closest(\"tr\").addClass(\"selected\");\n        showBulkActionsButton();\n      } else {\n        $(\".js-check-all-resources\").closest(\"tr\").removeClass(\"selected\");\n        hideBulkActionsButton();\n      }\n\n      selectedResourcesCountUpdate();\n    });\n\n    // resource checkbox change\n    $(\".table-list\").on(\"change\", \".js-check-all-resources\", function() {\n      let resourceId = $(this).val()\n      let checked = $(this).prop(\"checked\")\n\n      // uncheck \"select all\", if one of the listed checkbox item is unchecked\n      if ($(this).prop(\"checked\") === false) {\n        $(\".js-check-all\").prop(\"checked\", false);\n      }\n      // check \"select all\" if all checkbox resources are checked\n      if ($(\".js-check-all-resources:checked\").length === $(\".js-check-all-resources\").length) {\n        $(\".js-check-all\").prop(\"checked\", true);\n        showBulkActionsButton();\n      }\n\n      if ($(this).prop(\"checked\")) {\n        showBulkActionsButton();\n        $(this).closest(\"tr\").addClass(\"selected\");\n      } else {\n        hideBulkActionsButton();\n        $(this).closest(\"tr\").removeClass(\"selected\");\n      }\n\n      if ($(\".js-check-all-resources:checked\").length === 0) {\n        hideBulkActionsButton();\n      }\n\n      $(\".js-bulk-action-form\").find(`.js-resource-id-${resourceId}`).prop(\"checked\", checked);\n      selectedResourcesCountUpdate();\n    });\n\n    $(\".js-cancel-bulk-action\").on(\"click\", () => {\n      hideBulkActionForms()\n      showBulkActionsButton();\n      showOtherActionsButtons();\n    });\n  }\n});\n/* eslint-enable no-invalid-this */\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}