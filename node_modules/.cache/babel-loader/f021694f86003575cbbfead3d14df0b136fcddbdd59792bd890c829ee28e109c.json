{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nimport icon from \"src/decidim/icon\";\nvar EXCLUDE_CLASSES = [\"card--list__data__icon\", \"footer-social__icon\", \"logo-cityhall\"];\nvar EXCLUDE_ANCESTOR_CLASSES = [\"editor-container\"];\nvar EXCLUDE_REL = [\"license\", \"decidim\"];\nvar DEFAULT_MESSAGES = {\n  externalLink: \"External link\"\n};\nvar MESSAGES = DEFAULT_MESSAGES;\nvar ExternalLink = /*#__PURE__*/function () {\n  function ExternalLink(link) {\n    _classCallCheck(this, ExternalLink);\n    this.$link = link;\n    this.setup();\n  }\n  _createClass(ExternalLink, [{\n    key: \"setup\",\n    value: function setup() {\n      var _this = this;\n      if (EXCLUDE_CLASSES.some(function (cls) {\n        return _this.$link.hasClass(cls);\n      })) {\n        return;\n      }\n      if (EXCLUDE_ANCESTOR_CLASSES.some(function (cls) {\n        return _this.$link.parents().hasClass(cls);\n      })) {\n        return;\n      }\n      if (EXCLUDE_REL.some(function (rel) {\n        var linkRels = \"\".concat(_this.$link.attr(\"rel\")).split(\" \");\n        return linkRels.indexOf(rel) > -1;\n      })) {\n        return;\n      }\n      var $target = this.$link;\n      if (this.$link[0].hasAttribute(\"data-external-link-target\")) {\n        $target = $(this.$link.data(\"external-link-target\"), this.$link);\n        if ($target.length < 1) {\n          $target = this.$link;\n        }\n      }\n      $target.addClass(\"external-link-container\");\n      var spacer = \"&nbsp;\";\n      if (this.$link[0].hasAttribute(\"data-external-link-spacer\")) {\n        spacer = this.$link.data(\"external-link-spacer\");\n      } else if ($target.text().trim().length < 1) {\n        // Fixes image links extra space\n        spacer = \"\";\n      }\n      $target.append(\"\".concat(spacer).concat(this.generateElement()));\n    }\n  }, {\n    key: \"generateElement\",\n    value: function generateElement() {\n      var content = \"\".concat(this.generateIcon()).concat(this.generateScreenReaderLabel());\n      return \"<span class=\\\"external-link-indicator\\\">\".concat(content, \"</span>\");\n    }\n  }, {\n    key: \"generateIcon\",\n    value: function generateIcon() {\n      return icon(\"external-link\");\n    }\n  }, {\n    key: \"generateScreenReaderLabel\",\n    value: function generateScreenReaderLabel() {\n      return \"<span class=\\\"show-for-sr\\\">(\".concat(MESSAGES.externalLink, \")</span>\");\n    }\n  }], [{\n    key: \"configureMessages\",\n    value: function configureMessages(messages) {\n      MESSAGES = $.extend(DEFAULT_MESSAGES, messages);\n    }\n  }]);\n  return ExternalLink;\n}();\nexport { ExternalLink as default };","map":{"version":3,"names":["icon","EXCLUDE_CLASSES","EXCLUDE_ANCESTOR_CLASSES","EXCLUDE_REL","DEFAULT_MESSAGES","externalLink","MESSAGES","ExternalLink","link","_classCallCheck","$link","setup","_createClass","key","value","_this","some","cls","hasClass","parents","rel","linkRels","concat","attr","split","indexOf","$target","hasAttribute","$","data","length","addClass","spacer","text","trim","append","generateElement","content","generateIcon","generateScreenReaderLabel","configureMessages","messages","extend","default"],"sources":["/home/nico/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.3/app/packs/src/decidim/external_link.js"],"sourcesContent":["import icon from \"src/decidim/icon\"\n\nconst EXCLUDE_CLASSES = [\n  \"card--list__data__icon\",\n  \"footer-social__icon\",\n  \"logo-cityhall\"\n];\nconst EXCLUDE_ANCESTOR_CLASSES = [\n  \"editor-container\"\n]\nconst EXCLUDE_REL = [\"license\", \"decidim\"];\n\nconst DEFAULT_MESSAGES = {\n  externalLink: \"External link\"\n};\nlet MESSAGES = DEFAULT_MESSAGES;\n\nexport default class ExternalLink {\n  static configureMessages(messages) {\n    MESSAGES = $.extend(DEFAULT_MESSAGES, messages);\n  }\n\n  constructor(link) {\n    this.$link = link;\n\n    this.setup();\n  }\n\n  setup() {\n    if (EXCLUDE_CLASSES.some((cls) => this.$link.hasClass(cls))) {\n      return;\n    }\n    if (EXCLUDE_ANCESTOR_CLASSES.some((cls) => this.$link.parents().hasClass(cls))) {\n      return;\n    }\n    if (\n      EXCLUDE_REL.some((rel) => {\n        const linkRels = `${this.$link.attr(\"rel\")}`.split(\" \");\n        return linkRels.indexOf(rel) > -1;\n      })\n    ) {\n      return;\n    }\n\n    let $target = this.$link;\n    if (this.$link[0].hasAttribute(\"data-external-link-target\")) {\n      $target = $(this.$link.data(\"external-link-target\"), this.$link);\n      if ($target.length < 1) {\n        $target = this.$link;\n      }\n    }\n\n    $target.addClass(\"external-link-container\");\n    let spacer = \"&nbsp;\";\n    if (this.$link[0].hasAttribute(\"data-external-link-spacer\")) {\n      spacer = this.$link.data(\"external-link-spacer\");\n    } else if ($target.text().trim().length < 1) {\n      // Fixes image links extra space\n      spacer = \"\";\n    }\n\n    $target.append(`${spacer}${this.generateElement()}`);\n  }\n\n  generateElement() {\n    let content = `${this.generateIcon()}${this.generateScreenReaderLabel()}`;\n\n    return `<span class=\"external-link-indicator\">${content}</span>`;\n  }\n\n  generateIcon() {\n    return icon(\"external-link\");\n  }\n\n  generateScreenReaderLabel() {\n    return `<span class=\"show-for-sr\">(${MESSAGES.externalLink})</span>`;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}