{"ast":null,"code":"/* global JsDiff */\n\n$(function () {\n  $(\".diff-i18n_html, .diff-i18n\").each(function (_index, element) {\n    var diffElement = $(element);\n    var valueElement = diffElement.find(\".diff__value\");\n    var oldValue = valueElement.data(\"old-value\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n    var newValue = valueElement.data(\"new-value\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n    var diff = JsDiff.diffChars(oldValue, newValue);\n    var outputHTML = \"\";\n    diff.forEach(function (_ref) {\n      var added = _ref.added,\n        removed = _ref.removed,\n        value = _ref.value;\n      var color = \"\";\n      if (added) {\n        color = \"#89ffaa\";\n      } else if (removed) {\n        color = \"red\";\n      }\n      if (added || removed) {\n        outputHTML += \"<span style=\\\"background-color: \".concat(color, \"\\\">\").concat(value, \"</span>\");\n      } else {\n        outputHTML += value;\n      }\n    });\n    outputHTML = outputHTML.replace(/\\n/g, \"<br><br>\");\n    valueElement.html(outputHTML);\n  });\n});","map":{"version":3,"names":["$","each","_index","element","diffElement","valueElement","find","oldValue","data","replace","newValue","diff","JsDiff","diffChars","outputHTML","forEach","_ref","added","removed","value","color","concat","html"],"sources":["/home/nico/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-accountability-0.27.3/app/packs/src/decidim/accountability/version_diff.js"],"sourcesContent":["/* global JsDiff */\n\n$(() => {\n  $(\".diff-i18n_html, .diff-i18n\").each(function(_index, element) {\n    const diffElement = $(element);\n    const valueElement = diffElement.find(\".diff__value\");\n    const oldValue = valueElement.data(\"old-value\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n    const newValue = valueElement.data(\"new-value\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n\n    const diff = JsDiff.diffChars(oldValue, newValue);\n    let outputHTML = \"\";\n\n    diff.forEach(({added, removed, value}) => {\n      let color = \"\";\n\n      if (added) {\n        color = \"#89ffaa\";\n      } else if (removed) {\n        color = \"red\";\n      }\n\n      if (added || removed) {\n        outputHTML += `<span style=\"background-color: ${color}\">${value}</span>`;\n      } else {\n        outputHTML += value;\n      }\n    });\n\n    outputHTML = outputHTML.replace(/\\n/g, \"<br><br>\");\n\n    valueElement.html(outputHTML);\n  });\n})\n"],"mappings":"AAAA;;AAEAA,CAAC,CAAC,YAAM;EACNA,CAAC,CAAC,6BAA6B,CAAC,CAACC,IAAI,CAAC,UAASC,MAAM,EAAEC,OAAO,EAAE;IAC9D,IAAMC,WAAW,GAAGJ,CAAC,CAACG,OAAO,CAAC;IAC9B,IAAME,YAAY,GAAGD,WAAW,CAACE,IAAI,CAAC,cAAc,CAAC;IACrD,IAAMC,QAAQ,GAAGF,YAAY,CAACG,IAAI,CAAC,WAAW,CAAC,CAACC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC;IAC3F,IAAMC,QAAQ,GAAGL,YAAY,CAACG,IAAI,CAAC,WAAW,CAAC,CAACC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC;IAE3F,IAAME,IAAI,GAAGC,MAAM,CAACC,SAAS,CAACN,QAAQ,EAAEG,QAAQ,CAAC;IACjD,IAAII,UAAU,GAAG,EAAE;IAEnBH,IAAI,CAACI,OAAO,CAAC,UAAAC,IAAA,EAA6B;MAAA,IAA3BC,KAAK,GAAAD,IAAA,CAALC,KAAK;QAAEC,OAAO,GAAAF,IAAA,CAAPE,OAAO;QAAEC,KAAK,GAAAH,IAAA,CAALG,KAAK;MAClC,IAAIC,KAAK,GAAG,EAAE;MAEd,IAAIH,KAAK,EAAE;QACTG,KAAK,GAAG,SAAS;MACnB,CAAC,MAAM,IAAIF,OAAO,EAAE;QAClBE,KAAK,GAAG,KAAK;MACf;MAEA,IAAIH,KAAK,IAAIC,OAAO,EAAE;QACpBJ,UAAU,uCAAAO,MAAA,CAAsCD,KAAK,SAAAC,MAAA,CAAKF,KAAK,YAAS;MAC1E,CAAC,MAAM;QACLL,UAAU,IAAIK,KAAK;MACrB;IACF,CAAC,CAAC;IAEFL,UAAU,GAAGA,UAAU,CAACL,OAAO,CAAC,KAAK,EAAE,UAAU,CAAC;IAElDJ,YAAY,CAACiB,IAAI,CAACR,UAAU,CAAC;EAC/B,CAAC,CAAC;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}