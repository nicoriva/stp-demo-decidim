{"ast":null,"code":"var DEFAULT_ATTRIBUTES = {\n  role: \"img\",\n  \"aria-hidden\": \"true\"\n};\n\n/**\n * Generates a Decidim icon element and returns it as a string.\n * @param {String} iconKey - the key of the icon to be generated\n * @param {Object} attributes - extra attributes to define for the icon SVG\n * @param {int} wait - number of milliseconds to wait before executing the function.\n * @private\n * @returns {Void} - Returns nothing.\n */\nexport default function icon(iconKey) {\n  var attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var iconAttributes = $.extend(DEFAULT_ATTRIBUTES, attributes);\n  var title = iconAttributes.title || iconAttributes.ariaLabel;\n  Reflect.deleteProperty(iconAttributes, \"title\");\n  var htmlAttributes = {\n    \"class\": \"icon icon--\".concat(iconKey)\n  };\n  Object.keys(iconAttributes).forEach(function (key) {\n    // Convert the key to dash-format.\n    var newKey = key.replace(/([A-Z])/g, function (ucw) {\n      return \"-\".concat(ucw[0].toLowerCase());\n    });\n    if (typeof htmlAttributes[key] === \"undefined\") {\n      htmlAttributes[newKey] = iconAttributes[key];\n    } else {\n      htmlAttributes[newKey] = \"\".concat(htmlAttributes[newKey], \" \").concat(iconAttributes[key]);\n    }\n  });\n  var iconsPath = window.Decidim.config.get(\"icons_path\");\n  var elHtml = \"<svg><use href=\\\"\".concat(iconsPath, \"#icon-\").concat(iconKey, \"\\\"></use></svg>\");\n  var $el = $(elHtml);\n  if (title) {\n    $el.prepend(\"<title>\".concat(title, \"</title>\"));\n  } else {\n    // This keeps accessibility audit tools happy\n    $el.prepend(\"<title>\".concat(iconKey, \"</title>\"));\n    // Force hidden if title is not defined\n    htmlAttributes[\"aria-hidden\"] = \"true\";\n  }\n  $el.attr(htmlAttributes);\n  return $(\"<div />\").append($el).html();\n}","map":{"version":3,"names":["DEFAULT_ATTRIBUTES","role","icon","iconKey","attributes","arguments","length","undefined","iconAttributes","$","extend","title","ariaLabel","Reflect","deleteProperty","htmlAttributes","concat","Object","keys","forEach","key","newKey","replace","ucw","toLowerCase","iconsPath","window","Decidim","config","get","elHtml","$el","prepend","attr","append","html"],"sources":["/home/nico/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.3/app/packs/src/decidim/icon.js"],"sourcesContent":["const DEFAULT_ATTRIBUTES = {\n  role: \"img\",\n  \"aria-hidden\": \"true\"\n};\n\n/**\n * Generates a Decidim icon element and returns it as a string.\n * @param {String} iconKey - the key of the icon to be generated\n * @param {Object} attributes - extra attributes to define for the icon SVG\n * @param {int} wait - number of milliseconds to wait before executing the function.\n * @private\n * @returns {Void} - Returns nothing.\n */\nexport default function icon(iconKey, attributes = {}) {\n  const iconAttributes = $.extend(DEFAULT_ATTRIBUTES, attributes);\n  const title = iconAttributes.title || iconAttributes.ariaLabel;\n  Reflect.deleteProperty(iconAttributes, \"title\");\n\n  const htmlAttributes = {\n    \"class\": `icon icon--${iconKey}`\n  };\n  Object.keys(iconAttributes).forEach((key) => {\n    // Convert the key to dash-format.\n    const newKey = key.replace(/([A-Z])/g, (ucw) => `-${ucw[0].toLowerCase()}`);\n    if (typeof htmlAttributes[key] === \"undefined\") {\n      htmlAttributes[newKey] = iconAttributes[key];\n    } else {\n      htmlAttributes[newKey] = `${htmlAttributes[newKey]} ${iconAttributes[key]}`;\n    }\n  });\n\n  const iconsPath =  window.Decidim.config.get(\"icons_path\");\n  const elHtml = `<svg><use href=\"${iconsPath}#icon-${iconKey}\"></use></svg>`;\n  const $el = $(elHtml);\n  if (title) {\n    $el.prepend(`<title>${title}</title>`);\n  } else {\n    // This keeps accessibility audit tools happy\n    $el.prepend(`<title>${iconKey}</title>`);\n    // Force hidden if title is not defined\n    htmlAttributes[\"aria-hidden\"] = \"true\";\n  }\n  $el.attr(htmlAttributes);\n\n  return $(\"<div />\").append($el).html();\n}\n"],"mappings":"AAAA,IAAMA,kBAAkB,GAAG;EACzBC,IAAI,EAAE,KAAK;EACX,aAAa,EAAE;AACjB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,IAAIA,CAACC,OAAO,EAAmB;EAAA,IAAjBC,UAAU,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACnD,IAAMG,cAAc,GAAGC,CAAC,CAACC,MAAM,CAACV,kBAAkB,EAAEI,UAAU,CAAC;EAC/D,IAAMO,KAAK,GAAGH,cAAc,CAACG,KAAK,IAAIH,cAAc,CAACI,SAAS;EAC9DC,OAAO,CAACC,cAAc,CAACN,cAAc,EAAE,OAAO,CAAC;EAE/C,IAAMO,cAAc,GAAG;IACrB,OAAO,gBAAAC,MAAA,CAAgBb,OAAO;EAChC,CAAC;EACDc,MAAM,CAACC,IAAI,CAACV,cAAc,CAAC,CAACW,OAAO,CAAC,UAACC,GAAG,EAAK;IAC3C;IACA,IAAMC,MAAM,GAAGD,GAAG,CAACE,OAAO,CAAC,UAAU,EAAE,UAACC,GAAG;MAAA,WAAAP,MAAA,CAASO,GAAG,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;IAAA,CAAE,CAAC;IAC3E,IAAI,OAAOT,cAAc,CAACK,GAAG,CAAC,KAAK,WAAW,EAAE;MAC9CL,cAAc,CAACM,MAAM,CAAC,GAAGb,cAAc,CAACY,GAAG,CAAC;IAC9C,CAAC,MAAM;MACLL,cAAc,CAACM,MAAM,CAAC,MAAAL,MAAA,CAAMD,cAAc,CAACM,MAAM,CAAC,OAAAL,MAAA,CAAIR,cAAc,CAACY,GAAG,CAAC,CAAE;IAC7E;EACF,CAAC,CAAC;EAEF,IAAMK,SAAS,GAAIC,MAAM,CAACC,OAAO,CAACC,MAAM,CAACC,GAAG,CAAC,YAAY,CAAC;EAC1D,IAAMC,MAAM,uBAAAd,MAAA,CAAsBS,SAAS,YAAAT,MAAA,CAASb,OAAO,oBAAgB;EAC3E,IAAM4B,GAAG,GAAGtB,CAAC,CAACqB,MAAM,CAAC;EACrB,IAAInB,KAAK,EAAE;IACToB,GAAG,CAACC,OAAO,WAAAhB,MAAA,CAAWL,KAAK,aAAU,CAAC;EACxC,CAAC,MAAM;IACL;IACAoB,GAAG,CAACC,OAAO,WAAAhB,MAAA,CAAWb,OAAO,aAAU,CAAC;IACxC;IACAY,cAAc,CAAC,aAAa,CAAC,GAAG,MAAM;EACxC;EACAgB,GAAG,CAACE,IAAI,CAAClB,cAAc,CAAC;EAExB,OAAON,CAAC,CAAC,SAAS,CAAC,CAACyB,MAAM,CAACH,GAAG,CAAC,CAACI,IAAI,CAAC,CAAC;AACxC"},"metadata":{},"sourceType":"module","externalDependencies":[]}